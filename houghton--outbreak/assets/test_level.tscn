[gd_scene load_steps=10 format=3 uid="uid://dwpsls5jnk4qd"]

[ext_resource type="PackedScene" uid="uid://djmqij828p3ey" path="res://assets/test_player.tscn" id="1_lg7yx"]
[ext_resource type="Script" path="res://scripts/camera_trigger.gd" id="2_2r25l"]
[ext_resource type="PackedScene" uid="uid://blrtg7c3skl1l" path="res://level/test_area.tscn" id="3_wh8uq"]
[ext_resource type="PackedScene" uid="uid://cjqi0f3r118nc" path="res://assets/test_enemy.tscn" id="4_1ydlv"]
[ext_resource type="Script" path="res://level/test_area.gd" id="4_eq5rt"]

[sub_resource type="BoxShape3D" id="BoxShape3D_278v1"]

[sub_resource type="BoxShape3D" id="BoxShape3D_klieq"]

[sub_resource type="NavigationMesh" id="NavigationMesh_bo7y1"]
vertices = PackedVector3Array(-7.79184, 1.48354, -11.4185, -6.04184, 1.48354, -11.4185, -5.79184, 1.48354, -58.6685, -8.54184, 1.48354, -10.9185, -57.7918, 1.48354, -8.9185, -9.04184, 1.48354, -8.1685, -54.2918, 1.48354, -61.9185, 7.45816, 1.48354, -10.4185, 7.70816, 1.48354, -57.6685, 9.45816, 1.48354, -10.1685, 9.95816, 1.48354, -8.1685, 60.9582, 1.48354, -8.1685, 64.2082, 1.48354, -53.9185, -9.54184, 1.48354, -3.6685, -58.2918, 1.48354, -3.6685, -7.04184, 13.9835, 4.3315, -7.04184, 13.9835, 7.0815, 5.45816, 13.9835, 7.8315, 6.45816, 13.9835, -3.6685, 6.45816, 13.9835, -7.1685, -6.04184, 13.9835, -8.1685, 9.45816, 1.48354, -6.4185, 8.70816, 1.48354, 9.3315, 59.7082, 1.48354, 10.0815, -7.79184, 1.48354, -1.4185, -8.04184, 1.48354, -0.168503, -7.04184, 1.48354, -0.168503, -6.79184, 1.48354, -1.4185, -1.29184, 1.48354, 3.5815, 0.208164, 1.48354, 5.5815, 4.95816, 1.48354, 7.3315, -6.04184, 1.48354, 0.831497, -6.04184, 1.48354, 6.8315, -3.54184, 1.48354, 6.8315, -3.54184, 1.48354, 5.5815, -5.79184, 1.48354, -2.4185, -2.79184, 1.48354, 4.0815, -5.29184, 1.48354, -7.4185, 5.70816, 1.48354, -6.6685, -0.0418358, 1.48354, 7.0815, -9.29184, 1.48354, -1.9185, -9.54184, 1.48354, 0.331497, -58.5418, 1.48354, 2.0815, -9.79184, 1.48354, 2.3315, -10.2918, 1.48354, 7.3315, -59.0418, 1.48354, 7.3315, -9.79184, 1.48354, 9.8315, -8.04184, 1.48354, 60.0815, -7.54184, 1.48354, 10.3315, -9.04184, 1.48354, 10.3315, -62.2918, 1.48354, 56.5815, 8.20816, 1.48354, 11.0815, 5.70816, 1.48354, 11.3315, 5.45816, 1.48354, 61.0815, 56.2082, 1.48354, 64.5815)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 3), PackedInt32Array(3, 4, 2), PackedInt32Array(2, 4, 6), PackedInt32Array(2, 8, 1), PackedInt32Array(1, 8, 7), PackedInt32Array(9, 7, 8), PackedInt32Array(9, 8, 10), PackedInt32Array(10, 8, 11), PackedInt32Array(11, 8, 12), PackedInt32Array(5, 13, 4), PackedInt32Array(4, 13, 14), PackedInt32Array(16, 15, 17), PackedInt32Array(17, 15, 18), PackedInt32Array(18, 15, 19), PackedInt32Array(19, 15, 20), PackedInt32Array(21, 10, 22), PackedInt32Array(22, 10, 23), PackedInt32Array(23, 10, 11), PackedInt32Array(27, 26, 24), PackedInt32Array(24, 26, 25), PackedInt32Array(30, 29, 28), PackedInt32Array(31, 26, 27), PackedInt32Array(34, 33, 32), PackedInt32Array(27, 35, 31), PackedInt32Array(31, 35, 36), PackedInt32Array(36, 35, 28), PackedInt32Array(34, 32, 36), PackedInt32Array(36, 32, 31), PackedInt32Array(35, 37, 28), PackedInt32Array(28, 37, 38), PackedInt32Array(28, 38, 30), PackedInt32Array(29, 30, 39), PackedInt32Array(24, 25, 40), PackedInt32Array(40, 25, 41), PackedInt32Array(40, 41, 13), PackedInt32Array(13, 41, 43), PackedInt32Array(13, 43, 14), PackedInt32Array(14, 43, 42), PackedInt32Array(43, 44, 42), PackedInt32Array(42, 44, 45), PackedInt32Array(45, 44, 46), PackedInt32Array(49, 48, 47), PackedInt32Array(46, 49, 45), PackedInt32Array(45, 49, 50), PackedInt32Array(50, 49, 47), PackedInt32Array(53, 52, 51), PackedInt32Array(51, 22, 53), PackedInt32Array(53, 22, 54), PackedInt32Array(54, 22, 23), PackedInt32Array(48, 52, 47), PackedInt32Array(47, 52, 53)]
agent_radius = 1.1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_5jyhb"]
albedo_color = Color(0.482939, 0.326935, 0.0905248, 1)

[node name="Test Level" type="Node3D"]

[node name="Test Player" parent="." instance=ExtResource("1_lg7yx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0873151, 2.41036, -0.259418)

[node name="Map Compenents" type="CSGCombiner3D" parent="."]
transform = Transform3D(0.997708, 0, -0.067667, 0, 1, 0, 0.067667, 0, 0.997708, 0, 0, 0)
use_collision = true

[node name="Lighting" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 6.07987, -0.0402107)
omni_range = 21.0098

[node name="Camera1(inside)" type="Camera3D" parent="."]
transform = Transform3D(0.518748, 0.633136, -0.57449, -0.100113, 0.712339, 0.694658, 0.849045, -0.302839, 0.43291, -6.28505, 11.0273, 7.3548)

[node name="Area3D" type="Area3D" parent="Camera1(inside)"]
transform = Transform3D(-1.00202, -8.93246, -6.34091, 7.68728, 3.96281, -6.7972, 7.80396, -5.05048, 5.8814, -2.81341, 3.2158, -9.41504)
script = ExtResource("2_2r25l")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Camera1(inside)/Area3D"]
shape = SubResource("BoxShape3D_278v1")

[node name="Camera2(outside)" type="Camera3D" parent="."]
transform = Transform3D(0.99573, 0.0223663, -0.0895619, -0.0146705, 0.996215, 0.0856816, 0.0911392, -0.0840018, 0.992289, -11.285, 4.27501, 9.27179)

[node name="Area3D" type="Area3D" parent="Camera2(outside)"]
transform = Transform3D(9, 0, 0, 0, 8.96575, -1.5688, 0, 0.784402, 17.9315, -2.894, 2.48101, -10.1237)
script = ExtResource("2_2r25l")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Camera2(outside)/Area3D"]
shape = SubResource("BoxShape3D_klieq")

[node name="Camera3(outside)" type="Camera3D" parent="."]
transform = Transform3D(0.0181011, 0.0859414, -0.996136, -0.0146705, 0.996215, 0.0856816, 0.999729, 0.0130629, 0.0192934, -10.1856, 4.12584, 10.65)

[node name="Area3D" type="Area3D" parent="Camera3(outside)"]
transform = Transform3D(9, 0, 0, 0, 8.96575, -1.5688, 0, 0.784402, 17.9315, 3.41673, 2.52898, -9.93269)
script = ExtResource("2_2r25l")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Camera3(outside)/Area3D"]
shape = SubResource("BoxShape3D_klieq")

[node name="UI Scene" parent="." instance=ExtResource("3_wh8uq")]
script = ExtResource("4_eq5rt")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_bo7y1")

[node name="floor" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.997708, 0, -0.067667, 0, 1, 0, 0.067667, 0, 0.997708, 0.913355, 0.483542, 1.28669)
use_collision = true
size = Vector3(121, 1, 121)
material = SubResource("StandardMaterial3D_5jyhb")

[node name="wall" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.997708, 0, -0.067667, 0, 1, 0, 0.067667, 0, 0.997708, 0.609003, 7, -8.97937)
use_collision = true
size = Vector3(16, 12.3475, 1)

[node name="wall2" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.997708, 0, -0.067667, 0, 1, 0, 0.067667, 0, 0.997708, -0.609003, 7, 8.97937)
use_collision = true
size = Vector3(16, 12.3475, 1)

[node name="wall3" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.067667, 0, 0.997708, 0, 1, 0, -0.997708, 0, 0.067667, 7.21894, 6.7072, 0.389768)
use_collision = true
size = Vector3(17.416, 12.3475, 1)

[node name="wall4" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.067667, 0, 0.997708, 0, 1, 0, -0.997708, 0, 0.067667, -7.37945, 6.7072, -6.03983)
use_collision = true
size = Vector3(6.56195, 12.3475, 1)

[node name="wall5" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.067667, 0, 0.997708, 0, 1, 0, -0.997708, 0, 0.067667, -8.09835, 6.81389, 4.55994)
use_collision = true
size = Vector3(6.78058, 12.3475, 1)

[node name="wall6" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.067667, 0, 0.997708, 0, 1, 0, -0.997708, 0, 0.067667, -7.73436, 9.83307, -0.806876)
use_collision = true
size = Vector3(3.94813, 6, 1)

[node name="roof" type="CSGBox3D" parent="NavigationRegion3D"]
transform = Transform3D(0.997708, 0, -0.067667, 0, 1, 0, 0.067667, 0, 0.997708, -0.265062, 13.4204, -0.0688823)
use_collision = true
size = Vector3(14.9521, 0.450195, 17.4457)

[node name="Test Enemy" parent="NavigationRegion3D" instance=ExtResource("4_1ydlv")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.65573, 2.4057, 6.1882)
player_path = NodePath("../../Test Player")

[connection signal="player_hit" from="Test Player" to="UI Scene" method="_on_test_player_player_hit"]
[connection signal="body_entered" from="Camera1(inside)/Area3D" to="Camera1(inside)/Area3D" method="enter_trigger"]
[connection signal="body_exited" from="Camera1(inside)/Area3D" to="Camera1(inside)/Area3D" method="exit_trigger"]
[connection signal="body_entered" from="Camera2(outside)/Area3D" to="Camera2(outside)/Area3D" method="enter_trigger"]
[connection signal="body_exited" from="Camera2(outside)/Area3D" to="Camera2(outside)/Area3D" method="exit_trigger"]
[connection signal="body_entered" from="Camera3(outside)/Area3D" to="Camera3(outside)/Area3D" method="enter_trigger"]
[connection signal="body_exited" from="Camera3(outside)/Area3D" to="Camera3(outside)/Area3D" method="exit_trigger"]
